document.addEventListener("DOMContentLoaded",(()=>{const e=new Converter,t=document.getElementById("input"),n=document.getElementById("output"),o=document.getElementById("response"),i=document.getElementById("select"),r=document.getElementById("copy"),c=()=>{let o=t.value.trim();if(o=o.replace(/\s/g,""),""!==o)if(e.isMyanmarUnicode(o)){if("from-kaw"===i.value){const t=e.tokenize(o),i=t.length;n.textContent=i%2==0?e.combinePairs(t).map((t=>e.convertFromKaw(t))).join(" "):"..."}"to-kaw"===i.value&&(n.textContent=e.tokenize(o).map((t=>e.convertToKaw(t))).join(" "))}else n.textContent="Invalid characters. Please use Myanmar Unicode characters.";else n.textContent=""};r.addEventListener("click",(()=>{navigator.clipboard.writeText(n.textContent),setTimeout((()=>{o.textContent=""}),1e3),o.textContent="Copied to clipboard"})),t.addEventListener("input",(()=>{c()})),i.addEventListener("change",(()=>{c()}));const s=document.getElementById("recognition-output"),a=document.getElementById("speak-btn"),d=document.getElementById("stop-btn");"webkitSpeechRecognition"in window?(recognition=new webkitSpeechRecognition,recognition.continuous=!0,recognition.interimResults=!1,recognition.lang="my",a.addEventListener("click",(()=>{recognition.start(),s.textContent="Listening..."})),d.addEventListener("click",(()=>{recognition.stop(),s.textContent+=" (Stopped)"})),recognition.onresult=e=>{const n=e.results[0][0].transcript;s.textContent=`You said: ${n}`,t.value=n,c()},recognition.onerror=e=>{s.textContent="Error occurred: "+e.error},recognition.onend=()=>{s.textContent+=" (Listening ended)"}):s.textContent="Speech recognition not supported in this browser."}));class Converter{consonants=["က","ခ","ဂ","ဃ","င","စ","ဆ","ဇ","ဈ","ဉ","ည","ဋ","ဌ","ဍ","ဎ","ဏ","တ","ထ","ဒ","ဓ","န","ပ","ဖ","ဗ","ဘ","မ","ယ","ရ","လ","ဝ","သ","ဟ","ဠ","အ","ဥ"];convertToKaw(e){const t=e[0],n=e[1],o=`ေ${this.getYeCha(t,n)}်${"က"===t?"သ":"က"}`;return"ျ"===n||"ြ"===n||"ှ"===n?`${t}${n}${o}${e.slice(2)}`:`${t}${o}${e.slice(1)}`}convertFromKaw(e){let[t,n]=this.tokenize(e);return t=t.replace(/[ေ်ါာ]/g,""),n=n.replace(/[ကသ]/g,""),t+n}getYeCha(e,t){return["ျ","ြ"].includes(t)?"ာ":["ခ","ဂ","ပ","ဖ","ဝ","ဒ"].includes(e)?"ါ":"ာ"}isMyanmarUnicode=e=>/^[\u1000-\u109F]+$/.test(e);combinePairs(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(e[n]+(e[n+1]||""));return t}tokenize(e){const t=[];let n="";for(let o=0;o<e.length;o++){const i=e[o];this.consonants.includes(i)?(n&&t.push(n),n=i):n+=i}n&&t.push(n);const o=[];for(let e=0;e<t.length;e++)e>0&&t[e].includes("်")&&!t[e].includes("ေ")?o[o.length-1]+=t[e]:o.push(t[e]);return o}}